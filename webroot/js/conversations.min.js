$(document).ready(function(){"use strict";var t=!1;$(".colorConversationBackground").click(function(){$(this).is(":checked")?$("#conversation-"+$(this).attr("value")+" td").css("background-color","#B5F3E7"):$("#conversation-"+$(this).attr("value")+" td").removeAttr("style")}),$(".colorAllConversationBackground").click(function(){return t===!1?$(".colorConversationBackground").each(function(){$(this).is(":checked")||($(this).prop("checked",!0),$("#conversation-"+$(this).attr("value")+" td").each(function(){$(this).css("background-color","#B5F3E7")}),t=!0)}):$(".colorConversationBackground").each(function(){$(this).is(":checked")&&($(this).prop("checked",!1),$("#conversation-"+$(this).attr("value")+" td").each(function(){$(this).removeAttr("style")}),t=!1)}),!1}),$(".conversationActionSubmit").change(function(){var t=[];if($(".colorConversationBackground:checked").each(function(){t.push($(this).attr("value"))}),"exit"===$(this).val())$("#conversationQuitModal").modal("show");else if(""!==$(this).val())return $.ajax({type:"POST",url:$("#conversationsForm").attr("action"),headers:{"X-CSRF-Token":$("#conversationsForm input[name='_csrfToken']").val()},dataType:"json",data:{conversations:t,action:$(".conversationActionSubmit").val()},success:function(t){"0"==t.error?($(".top-right").notify({message:{text:t.message},type:"success"}).show(),setTimeout(function(){$(location).attr("href",t.redirect)},2e3)):"1"==t.error&&$(".top-right").notify({message:{text:t.message},type:"danger"}).show()},error:function(){$(".top-right").notify({message:{text:"Error to do this action."},type:"danger"}).show()}}),!1}),$(".conversationQuitConfirm").click(function(){$("#conversationQuitModal").modal("hide");var t=[];return $(".colorConversationBackground:checked").each(function(){t.push($(this).attr("value"))}),$.ajax({type:"POST",url:$("#conversationsForm").attr("action"),headers:{"X-CSRF-Token":$("#conversationsForm input[name='_csrfToken']").val()},dataType:"json",data:{conversations:t,action:$(".conversationActionSubmit").val()},success:function(t){"0"==t.error?($(".top-right").notify({message:{text:t.message},type:"success"}).show(),setTimeout(function(){$(location).attr("href",t.redirect)},2e3)):"1"==t.error&&$(".top-right").notify({message:{text:t.message},type:"danger"}).show()},error:function(){$(".top-right").notify({message:{text:"Error to do this action."},type:"danger"}).show()}}),!1}),$("#InviteConversationUsers").typeahead({items:12,comma:!0,source:function(t,e){var o=t.split(", "),r=o[o.length-1];return $.get($("#InviteConversationUsers").attr("data-url"),{query:r},function(t){return e(t)},"json")}}),$(".QuoteMessage").bind("click",function(){return $.ajax({type:"GET",url:$(this).attr("data-url"),dataType:"json",success:function(t){t.error?$(".top-right").notify({message:{text:t.post},type:"danger"}).show():(CKEDITOR.instances.messageBox.insertHtml(t.message),$("html,body").animate({scrollTop:$(".conversationComment").offset().top},"slow"))},error:function(t){$(".top-right").notify({message:{text:"Error to quote the messsage."},type:"danger"}).show()}}),!1}),$(".editMessage").bind("click",function(){var t=$(this).attr("data-id");return $.ajax({type:"POST",url:$(this).attr("data-url"),headers:{"X-CSRF-Token":$(this).attr("data-csrf")},data:{id:t},dataType:"json",success:function(e){if(console.log(e),e.error)$(".top-right").notify({message:{text:e.errorMessage},type:"danger"}).show();else if(!$("#editingMessage-"+t).length){var o=$("#message-"+t+" .text");o.fadeOut(),o.after(e.html),CKEDITOR.replace("messageBox-"+t,{customConfig:"config/forum.js"})}},error:function(t){$(".top-right").notify({message:{text:"Error to edit the post."},type:"danger"}).show()}}),!1}),$(".KickRecipient").click(function(){return $.ajax({type:"GET",url:$(this).attr("data-url"),dataType:"json",success:function(t){t.error===!1?($("#recipient-"+t.id).remove(),$("#InformationNbRecipient").text(t.recipients),$(".top-right").notify({message:{text:t.message},type:"success"}).show()):t.error===!0&&$(".top-right").notify({message:{text:t.message},type:"danger"}).show()},error:function(t){$(".top-right").notify({message:{text:"Error to delete this user."},type:"danger"}).show()}}),!1})});